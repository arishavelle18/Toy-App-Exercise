<% provide(:title,"Create Micropost") %>
<h1>Add Micropost</h1>

<%= form_for @micropost, url: microposts_path,data: { turbo: false } do |f|%>
    <% if @micropost.errors.any?%>
    <div class="alert alert-danger">
        The form contains <%= pluralize(@micropost.errors.count, "error") %>.
        
        <% @micropost.errors.full_messages.each do |msg|%>
            <div class="alert alert-danger"><%= msg %></div>
        <% end %>
    </div
    <% end %>
    
    <p>
        <%= f.label :content%><br>
        <%= f.text_area :content ,class:"form-control"%>
    </p>
    <p>
        <%= f.file_field :image %><br><br>
    </p>
    <p>
        <input type="hidden" name="micropost[user_id]" value="<%= session[:user_id] %>"]>
    </p>
    <p>
        <%= f.submit({:class => 'btn btn-primary'})%>
    </p>
<%end%>
<%= link_to "Back",microposts_path,:class =>"btn btn-danger"%>